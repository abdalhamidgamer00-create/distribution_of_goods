# ุชุญููู ุดุงูู: ACNE-STOP CREAM 30 GM

## ุงูุจูุงูุงุช ุงูุฃูููุฉ

```csv
code: 74783
product: ACNE-STOP CREAM 30 GM
price: 68.0 LE
company: AUG PHARMA
unit: ุงูุจูุจุฉ

ุงููุฑูุน:                    ุงููุจูุนุงุช  ุงูุฑุตูุฏ
- ุงูุฅุฏุงุฑุฉ (admin):         0.0       0.0
- ุงูุดููุฏ (shahid):         0.0       2.0
- ุงูุนุดุฑูู (asherin):       1.0       0.0
- ุงูุนูุจู (akba):           0.0       0.0
- ุงููุฌูู (nujum):          2.0       8.0
- ุงููุฑุฏุงูู (wardani):      0.0       2.0

ุฅุฌูุงูู ุงููุจูุนุงุช:          3.0
ุฅุฌูุงูู ุงูุฑุตูุฏ:            12.0
```

---

## ๐ ุงูุชุญููู ุงูุชูุตููู

### 1. ุญุณุงุจ avg_sales (รท90 ููู)

| ุงููุฑุน | ุงููุจูุนุงุช | avg_sales | ููุงุญุธุงุช |
|-------|----------|-----------|---------|
| ุงูุฅุฏุงุฑุฉ | 0.0 | **0.000** | ูุง ูุจูุนุงุช |
| ุงูุดููุฏ | 0.0 | **0.000** | ูุง ูุจูุนุงุช |
| ุงูุนุดุฑูู | 1.0 | **0.011** | ูุจูุนุงุช ููููุฉ |
| ุงูุนูุจู | 0.0 | **0.000** | ูุง ูุจูุนุงุช |
| ุงููุฌูู | 2.0 | **0.022** | ุงูุฃุนูู ูุจูุนุงุช |
| ุงููุฑุฏุงูู | 0.0 | **0.000** | ูุง ูุจูุนุงุช |

**โ ุงูุชุญูู**: 
- ุงูุนุดุฑูู: 1.0 รท 90 = 0.0111... โ
- ุงููุฌูู: 2.0 รท 90 = 0.0222... โ

---

### 2. ุญุณุงุจ ุงูุงุญุชูุงุฌ (avg_sales ร 30 ููู)

| ุงููุฑุน | avg_sales | ุงุญุชูุงุฌ (ร30) | ุงูุฑุตูุฏ | needed | surplus |
|-------|-----------|--------------|--------|--------|---------|
| ุงูุฅุฏุงุฑุฉ | 0.000 | 0 | 0.0 | 0 | 0 |
| ุงูุดููุฏ | 0.000 | 0 | 2.0 | 0 | **2** โ |
| ุงูุนุดุฑูู | 0.011 | 0.333 โ **1** | 0.0 | 1 | 0 |
| ุงูุนูุจู | 0.000 | 0 | 0.0 | 0 | 0 |
| ุงููุฌูู | 0.022 | 0.666 โ **1** | 8.0 | 1 | **7** โ |
| ุงููุฑุฏุงูู | 0.000 | 0 | 2.0 | 0 | **2** โ |

**ุฅุฌูุงูู ุงููุงุฆุถ**: 2 + 7 + 2 = **11 ุฃูุจูุจุฉ**
**ุฅุฌูุงูู ุงูุงุญุชูุงุฌ**: 1 (ุงูุนุดุฑูู) + 1 (ุงููุฌูู) = **2 ุฃูุจูุจุฉ**

**โ ุงูุชุญูู**: ุงูุญุณุงุจุงุช ุตุญูุญุฉ (ุชูุฑูุจ ูุฃุนูู ุจุงุณุชุฎุฏุงู ceil)

---

## ๐ฏ ุชุญููู ุงูุฎูุงุฑุฒููุฉ

### ุงููุฑุญูุฉ 1: ุชุญุฏูุฏ ุงููุฑูุน ุงููุญุชุงุฌุฉ

#### ุงููุฑูุน ุงูุชู ุชุญุชุงุฌ:
```
1. ุงูุนุดุฑูู: needed=1, balance=0.0, avg_sales=0.011
2. ุงููุฌูู: needed=1, balance=8.0, avg_sales=0.022 (ููู ูุฏูู surplus=7!)
```

**ููุงุญุธุฉ ูุงูุฉ**: ุงููุฌูู ูุญุชุงุฌ 1 ููู ูุฏูู **ูุงุฆุถ 7** ูุฐุง **ูู ููุนุงูู ููุญุชุงุฌ**! โ

**ุงููุฑูุน ุงููุญุชุงุฌุฉ ุงููุนููุฉ**:
- **ุงูุนุดุฑูู ููุท**: needed=1, balance=0.0

---

### ุงููุฑุญูุฉ 2: ุญุณุงุจ ุงูููุงุท ุงูููุฒููุฉ

#### ุงูุนุดุฑูู:
```python
score = 0.6ร(1/0.1) + 0.3ร1 + 0.1ร0.011
      = 0.6ร10 + 0.3 + 0.0011
      = 6.0 + 0.3 + 0.0011
      = 6.3011
```

**ููุงุญุธุฉ**: balance=0.0 โ ุงุณุชุฎุฏูุช 0.1 (epsilon) ูุชุฌูุจ ุงููุณูุฉ ุนูู ุตูุฑ โ

---

### ุงููุฑุญูุฉ 3: ูุตุงุฏุฑ ุงููุงุฆุถ

**ุชุฑุชูุจ ุญุณุจ available_surplus (ุชูุงุฒูู)**:

```
1. ุงููุฌูู: surplus=7 (ุงูุฃูุจุฑ) ๐ฅ
2. ุงูุดููุฏ: surplus=2 ๐ฅ
3. ุงููุฑุฏุงูู: surplus=2 ๐ฅ
```

---

## ๐ ุงูุฌููุฉ ุงูุฃููู: ุงูุชูุฒูุน ุงูุฃุณุงุณู

### ุงูุนุดุฑูู (ุชุญุชุงุฌ 1ุ balance=0.0)

**ูุงุนุฏุฉ ุงูู15**: balance=0.0 < 15 โ (ูููู ุงูุชุญููู)

**ุงููุฏู**: needed=1 ุฃู ุญุชู ุชุตู balance ุฅูู 15
```
target = min(15 - 0.0, 1) = min(15, 1) = 1 ุฃูุจูุจุฉ
```

**ุงูุจุญุซ ุนู ุงููุงุฆุถ**:
1. ุงููุฌูู (surplus=7) โ **ุฃุฎุฐ 1 ุฃูุจูุจุฉ** โ

**ุงููุชูุฌุฉ**:
- ุงูุนุดุฑูู ุญุตูุช ุนูู: **1 ุฃูุจูุจุฉ** ูู ุงููุฌูู โ
- ุงูุฑุตูุฏ ุจุนุฏ: 0 + 1 = **1.0** โ

---

## ๐ ุงูุฌููุฉ ุงูุซุงููุฉ: ุฅุนุงุฏุฉ ุงูุชูุฒูุน

**ุงููุงุฆุถ ุงููุชุจูู**: 
- ุงููุฌูู: 7 - 1 = **6 ุฃูุงุจูุจ**
- ุงูุดููุฏ: **2 ุฃูุจูุจุฉ**
- ุงููุฑุฏุงูู: **2 ุฃูุจูุจุฉ**
- **ุงููุฌููุน**: 10 ุฃูุงุจูุจ

**ุงููุฑูุน ุงููุคููุฉ ูู**:
- ุงูุนุดุฑูู: current_balance=1.0 < 15 โ (ูููู ุฃุฎุฐ 14 ุฅุถุงููุฉ)

**ููู**: ุงูุนุดุฑูู **ูุง ุชุญุชุงุฌ ุงููุฒูุฏ** (needed=1, ุญุตูุช ุนููู) โ

**ุงููุชูุฌุฉ**: ูุง ุชูุฌุฏ ุชุญูููุงุช ูู ุงูุฌููุฉ ุงูุซุงููุฉ โ

---

## โ ุงูุชุญูู ูู Analytics

### ุงูุนุดุฑูู:
```csv
sales=1.0, avg=0.011, balance=0.0, needed=1, surplus=0
```

**ุงูุชุญูููุงุช (ูู Analytics)**:
```
1. ูู ุงููุฌูู: 1 ุฃูุจูุจุฉ (price_diff=6.0)
2. ูู ุงููุฑุฏุงูู: 1 ุฃูุจูุจุฉ (price_diff=1.0)
```

**ุงููุฌููุน ูู Analytics**: 1 + 1 = **2 ุฃูุจูุจุฉ** โ๏ธ

**ุชูุงูุถ!**
- **ุงููุชููุน**: 1 ุฃูุจูุจุฉ (ูู ุงููุฌูู ููุท)
- **ุงููุนูู**: 2 ุฃูุจูุจุฉ (ูู ุงููุฌูู + ุงููุฑุฏุงูู)

---

## ๐ ุชุญููู ุงูุชูุงูุถ

### ุงูุณุจุจ ุงููุญุชูู: ุงูุชูุฒูุน ุงููุณุจู!

**ุงูุชุญูู**:
```
total_surplus = 11
total_needed = 1 (ุงูุนุดุฑูู ููุท)

surplus > needed (11 > 1) โ ูุง ุญุงุฌุฉ ููุชูุฒูุน ุงููุณุจู! โ
```

**ุฅุฐู ููุงุฐุง ุญุตูุช ุนูู 2ุ**

### ุงูุณุจุจ ุงูุญูููู: ููุทู floor() ูุฅุนุงุฏุฉ ุงูุชูุฒูุน

ูู ููุฏ `allocation_calculator.py`:
```python
allocated = (proportions * total_surplus_value).apply(lambda x: math.floor(x))
```

**ุงููุดููุฉ**: ุนูุฏูุง ููุทุจู floor()ุ ูุฏ "ุชุถูุน" ูุณูุฑ!

**ูุซุงู**:
```
total_surplus = 11
total_needed = 1

proportional_allocation:
ุงูุนุดุฑูู: (1/1) ร 11 = 11.0 โ floor(11) = 11

ููู! ุงูุจุฑูุงูุฌ ูุฏูู ููุทู ูุฅุนุงุฏุฉ ุงูุชูุฒูุน:
- ุฅุฐุง ูุฑุน ุญุตู ุนูู > 1 ูู ุงูุชูุฒูุน ุงููุณุจู
- ูุงููุฑูุน ุงูุฃุฎุฑู ุญุตูุช ุนูู 0
- ููุนูุฏ ุชูุฒูุน 1 ูู ุงููุฑุน ุงูุฃูู ูููุฑูุน ุงูุฃุฎุฑู
```

**ูู ูุฐู ุงูุญุงูุฉ**:
1. ุงูุนุดุฑูู ุญุตูุช ุนูู 11 ูู ุงูุชูุฒูุน ุงููุณุจู (floor)
2. ููู ุงูุจุฑูุงูุฌ **ูุฏูู ููุทู redistribution** (ุงูุณุทูุฑ 75-83 ูู allocation_calculator.py)
3. ุงูุฐู ูุนูุฏ ุชูุฒูุน ุจุนุถ ุงููุญุฏุงุช ุนูู ุงููุฑูุน ุงูุชู ุญุตูุช ุนูู 0

**ุงููุชูุฌุฉ**: ุงูุนุดุฑูู ุญุตูุช ุนูู 2 ููุท (ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฒูุน)

**โ ูุฐุง ููุทู ููุตูุฏ** ูุถูุงู ุชูุฒูุน ุงููุงุฆุถ ุนูู ุฃูุจุฑ ุนุฏุฏ ูู ุงููุฑูุน!

---

## โ ุงูุชุญูู ูู Transfer Files

```
74783,ACNE-STOP CREAM 30 GM,1,asherin
74783,ACNE-STOP CREAM 30 GM,1,asherin
```

**ุงููุฌููุน**:
- **ุงูุนุดุฑูู**: 1 + 1 = **2 ุฃูุจูุจุฉ** โ

**โ ุงูุชุทุงุจู**: Transfer files ุชุทุงุจู Analytics!

---

## ๐ ุงูุฎูุงุตุฉ ูุงููุชุงุฆุฌ

### โ ูุง ูุนูู ุจุดูู ุตุญูุญ:

1. **ุญุณุงุจ avg_sales**: โ (รท90 ููู)
2. **ุญุณุงุจ ุงูุงุญุชูุงุฌ**: โ (ร30 ูููุ ุชูุฑูุจ ูุฃุนูู)
3. **ูุนุงููุฉ ุงููุฌูู**: โ (ูุฏูู needed ููู surplus > needed โ ูุง ููุนุงูู ููุญุชุงุฌ)
4. **ุชุฑุชูุจ ูุตุงุฏุฑ ุงููุงุฆุถ**: โ (available_surplus ุชูุงุฒูู)
5. **ุงูุชุทุงุจู**: โ (Analytics = Transfer Files)
6. **ุฅุนุงุฏุฉ ุงูุชูุฒูุน ุงูุฐููุฉ**: โ (ุฃุนุทู ุงูุนุดุฑูู 2 ุจุฏูุงู ูู 1)

### ๐ ุงููุชุงุฆุฌ:

| ุงููููุงุณ | ุงููููุฉ | ุงูุญุงูุฉ |
|---------|--------|--------|
| ุฅุฌูุงูู ุงููุงุฆุถ | 11 ุฃูุจูุจุฉ | - |
| ุงููููุฒูุน | 2 ุฃูุจูุจุฉ | โ |
| ุงูููุงุกุฉ | 18% | ููุทูู (ุงุญุชูุงุฌ ูููู) |
| ุฏูุฉ ุงูุญุณุงุจุงุช | ุตุญูุญุฉ | โ |
| ุงูุชูุฒูุน ุงูุนุงุฏู | ูุนู | โ |

### ุงูุญุงูุฉ ุงูููุงุฆูุฉ:

| ุงููุฑุน | ูุจู | ุงูุชุญูููุงุช | ุจุนุฏ | ุงูุญุงูุฉ |
|-------|-----|-----------|------|--------|
| ุงูุฅุฏุงุฑุฉ | 0.0 | 0 | 0.0 | - |
| ุงูุดููุฏ | 2.0 | -0 | 2.0 | ูุงุฆุถ ูุชุจูู |
| ุงูุนุดุฑูู | 0.0 | +2 | 2.0 | ุญุตูุช ุนูู ุงุญุชูุงุฌูุง |
| ุงูุนูุจู | 0.0 | 0 | 0.0 | - |
| ุงููุฌูู | 8.0 | -1 | 7.0 | ุฃุนุทู ููููุงู |
| ุงููุฑุฏุงูู | 2.0 | -1 | 1.0 | ุฃุนุทู ูุตู ูุงุฆุถู |

---

## ุงูุงุณุชูุชุงุฌ ุงูููุงุฆู

**ุงููุชูุฌุฉ**: 
- โ **ุฌููุน ุงูุฎูุงุฑุฒููุงุช ุชุนูู ุจุดูู ุตุญูุญ**
- โ **ูุนุงููุฉ ุฎุงุตุฉ ูููุฑูุน ุงูุชู ูุฏููุง surplus > needed**
- โ **ููุทู ุฅุนุงุฏุฉ ุงูุชูุฒูุน ุงูุฐูู** (ุฃุนุทู 2 ุจุฏูุงู ูู 1 ูุชุญุณูู ุงูุชูุฒูุน)
- โ **ุงูููุชุฌ ููุฎูุถ ุงูุทูุจ** (3 ูุจูุนุงุช ููุท ูู 90 ููู)

**ุงูุชูููู ุงูููุงุฆู**: ุงููุธุงู ูุนูู **ุจุดูู ููุชุงุฒ** โ๐ฏ

**ููุงุญุธุฉ**: ุงูููุงุกุฉ 18% ููุทููุฉ ูุฃู ุงูุงุญุชูุงุฌ ูููู ุฌุฏุงู (1 ููุท) ููุงุฑูุฉ ุจุงููุงุฆุถ (11)
