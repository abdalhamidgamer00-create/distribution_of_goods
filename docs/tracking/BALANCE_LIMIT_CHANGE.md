# ØªØºÙŠÙŠØ± Ø­Ø¯ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† 15 Ø¥Ù„Ù‰ 30

## Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ

ØªÙ… ØªØ­Ø¯ÙŠØ« `balance_limit` Ù…Ù† **15** Ø¥Ù„Ù‰ **30** ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª.

---

## Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØ¹Ø¯Ù„Ø©:

### 1. `target_calculator.py`

```python
# âŒ Ù‚Ø¨Ù„
MAX_ALLOWED_BALANCE = 15

# âœ… Ø¨Ø¹Ø¯
MAX_ALLOWED_BALANCE = 30
```

**Ø§Ù„ØªØ£Ø«ÙŠØ±**:
- Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„ØªÙŠ balance >= 30 Ù„Ù† ØªØ³ØªÙ„Ù… ÙÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
- (ÙƒØ§Ù†: >= 15)

---

### 2. `surplus_redistributor.py`

```python
# âŒ Ù‚Ø¨Ù„
def redistribute_wasted_surplus(..., balance_limit: float = 15.0):

# âœ… Ø¨Ø¹Ø¯
def redistribute_wasted_surplus(..., balance_limit: float = 30.0):
```

**Ø§Ù„ØªØ£Ø«ÙŠØ±**:
- Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„ÙØ±ÙˆØ¹ < 30 Ù…Ø¤Ù‡Ù„Ø©
- remaining_capacity = min(needed, 30 - current_balance)
- (ÙƒØ§Ù†: < 15 Ùˆ 15 - current_balance)

---

## Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„ÙˆÙƒ

### Ù…Ø¹ PANADOL (Ù…Ø«Ø§Ù„):

#### Ù‚Ø¨Ù„ (limit=15):

| Ø§Ù„ÙØ±Ø¹ | balance | needed | transferred | current_balance | Ù…Ø¤Ù‡Ù„ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ |
|-------|---------|--------|-------------|-----------------|----------------------|
| Ø§Ù„Ù†Ø¬ÙˆÙ… | 15.75 | 22 | 10 | 25.75 | âŒ (>= 15) |
| Ø§Ù„Ø´Ù‡ÙŠØ¯ | 15.0 | 14 | 0 | 15.0 | âŒ (>= 15) |
| Ø§Ù„Ø¹Ù‚Ø¨Ù‰ | 13.75 | 14 | 2 | 15.75 | âŒ (>= 15) |
| Ø§Ù„Ø¹Ø´Ø±ÙŠÙ† | 4.0 | 13 | 7 | 11.0 | âœ… (< 15) |
| Ø§Ù„ÙˆØ±Ø¯Ø§Ù†ÙŠ | 10.75 | 3 | 1 | 11.75 | âœ… (< 15) |

**Ø§Ù„Ù†ØªÙŠØ¬Ø©**: 2 ÙØ±ÙˆØ¹ Ù…Ø¤Ù‡Ù„Ø© ÙÙ‚Ø·

#### Ø¨Ø¹Ø¯ (limit=30):

| Ø§Ù„ÙØ±Ø¹ | balance | needed | transferred | current_balance | Ù…Ø¤Ù‡Ù„ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ |
|-------|---------|--------|-------------|-----------------|----------------------|
| Ø§Ù„Ù†Ø¬ÙˆÙ… | 15.75 | 22 | 10 | 25.75 | âœ… (< 30) |
| Ø§Ù„Ø´Ù‡ÙŠØ¯ | 15.0 | 14 | 0 | 15.0 | âœ… (< 30) |
| Ø§Ù„Ø¹Ù‚Ø¨Ù‰ | 13.75 | 14 | 2 | 15.75 | âœ… (< 30) |
| Ø§Ù„Ø¹Ø´Ø±ÙŠÙ† | 4.0 | 13 | 7 | 11.0 | âœ… (< 30) |
| Ø§Ù„ÙˆØ±Ø¯Ø§Ù†ÙŠ | 10.75 | 3 | 1 | 11.75 | âœ… (< 30) |

**Ø§Ù„Ù†ØªÙŠØ¬Ø©**: **5 ÙØ±ÙˆØ¹ Ù…Ø¤Ù‡Ù„Ø©** (Ø§Ù„ÙƒÙ„!)

---

## Ø§Ù„ÙÙˆØ§Ø¦Ø¯

### âœ… Ø§Ù„Ù…Ø²Ø§ÙŠØ§:

1. **Ù…Ø±ÙˆÙ†Ø© Ø£ÙƒØ¨Ø±**: Ø§Ù„ÙØ±ÙˆØ¹ ÙŠÙ…ÙƒÙ†Ù‡Ø§ ØªØ®Ø²ÙŠÙ† Ø­ØªÙ‰ 30 Ø¹Ù„Ø¨Ø©
2. **ØªØºØ·ÙŠØ© Ø£ÙØ¶Ù„**: Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙØ±ÙˆØ¹ Ù…Ø¤Ù‡Ù„Ø© Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
3. **Ø£Ù…Ø§Ù† Ø£ÙƒØ«Ø±**: buffer Ø£ÙƒØ¨Ø± Ø¶Ø¯ Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†

### âš ï¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:

1. **ØªØ®Ø²ÙŠÙ† Ø£ÙƒØ¨Ø±**: Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ù„ØªØ±Ø§ÙƒÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„ÙØ±ÙˆØ¹
2. **Ø§Ù„ÙØ§Ø¦Ø¶**: Ù‚Ø¯ ÙŠÙ‚Ù„ Ø§Ù„ÙØ§Ø¦Ø¶ Ø§Ù„Ù…ØªØ§Ø­ Ù„ÙØ±ÙˆØ¹ Ø£Ø®Ø±Ù‰
3. **Ø§Ù„ØªÙƒÙ„ÙØ©**: ØªÙƒÙ„ÙØ© ØªØ®Ø²ÙŠÙ† Ø£Ø¹Ù„Ù‰

---

## Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…ÙØ­Ø¯Ø«

### Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰:

```python
# target_calculator.py
if balance >= 30:  # ÙƒØ§Ù†: >= 15
    return 0  # Ù„Ø§ ØªØ­ÙˆÙŠÙ„

if balance + needed > 30:  # ÙƒØ§Ù†: > 15
    target = 30 - balance  # ÙƒØ§Ù†: 15 - balance
else:
    target = needed
```

### Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©:

```python
# surplus_redistributor.py
if needed > 0 and current_balance < 30:  # ÙƒØ§Ù†: < 15
    remaining_capacity = min(
        remaining_needed, 
        30 - current_balance  # ÙƒØ§Ù†: 15 - current_balance
    )
```

---

## Ø§Ù„ØªÙ‚ÙŠÙŠÙ…

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ù‚Ø¯ÙŠÙ… (15) | Ø§Ù„Ø¬Ø¯ÙŠØ¯ (30) |
|---------|-------------|-------------|
| Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ | 15 Ø¹Ù„Ø¨Ø© | 30 Ø¹Ù„Ø¨Ø© |
| Ø§Ù„Ù…Ø±ÙˆÙ†Ø© | Ù…Ø­Ø¯ÙˆØ¯Ø© | Ø¹Ø§Ù„ÙŠØ© âœ… |
| Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…Ø¤Ù‡Ù„Ø© (PANADOL) | 2 | 5 âœ… |
| Ø§Ù„ØªØ®Ø²ÙŠÙ† | Ù…Ù†Ø®ÙØ¶ | Ù…Ø±ØªÙØ¹ âš ï¸ |

**Ø§Ù„ØªÙˆØµÙŠØ©**: Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (30) **Ø£ÙƒØ«Ø± Ù…Ø±ÙˆÙ†Ø©** Ù„ÙƒÙ† ÙŠØªØ·Ù„Ø¨ **Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†** Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ±Ø§ÙƒÙ…! ğŸ“¦âœ…
